<!-- -------------------------------------------------------------------------

index.html
사용자에게 직접적으로 보여지는 WebApp 화면을 구성하는 index 파일입니다.

-------------------------------------------------------------------------- -->

<!DOCTYPE html>

<html>
    <head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" />
		
		<!-- css, js 파일 인클루드 -->
 		<link rel="stylesheet" href="./jquery/jquery.mobile-1.4.2.css" />
        <link rel="stylesheet" href="./jquery/themes/syoong-theme.min.css" />
		<link rel="stylesheet" href="anygrow2.css" />
  
		<script src="jquery/jquery-2.1.0.js"></script>

        <!-- ✅ Socket.IO는 Flask에서 파일을 주는 게 아니라 CDN에서 직접 가져온다 -->
        <script src="https://cdn.socket.io/4.7.2/socket.io.min.js" crossorigin="anonymous"></script>

        <script src="anygrow2_client.js"></script>
        <script src="jquery/jquery.mobile-1.4.2.js"></script>

		
    </head>
    
    <body>
    

    <!-- monitoring 탭 -->
	<div data-role="page" id="monitoring">
	
		<!-- 연두색 공통 헤더 영역 -->
   		<div data-role="header" style="height:85px; width:100%; top:0; z-index:10;" >
			<div class="headerbox" style="padding-left:10px; padding-top:6px;">
    	        <div style="float:left"><img src="image/header_leaf.png" width="70" height="70" alt=""/> </div> 
	       		<div style="float:left; padding-left:10px; padding-top:15px;">
                    <div style="font-size:12pt; color:#ffffff;">AnyGrow Ⅱ Hybrid WebApp</div>
                    <div style="font-size:10pt; color:#ffffff;">WITLab & Biwontech</div>
                    <div style="font-size:7pt;  color:#eef4e1;">Green Eneragy Technology Research Center</div>
                </div>       
            </div>
        </div>
		  
		  
		<!-- monitoring 탭 콘텐츠 영역 -->	
		<div data-role="content"> 
            
				<!-- 센서값 텍스트로 노출 -->
				<div id="sensoring_label" style="float:left; padding-left:10px;">
            		<img src="image/icon_t.png" />Temperature[℃]<br>
                    <label id='label_temperature'></label>
                    <img src="image/icon_h.png" />Humidity[%]<br>
                    <label id='label_humidity'></label>
                    <img src="image/icon_c.png" />CO<sub>2</sub>[ppm]<br>
                    <label id='label_co2'></label>
                    <img src="image/icon_l.png" />Illumination[lx]<br>
                    <label id='label_illumination'></label>
                    <br><label id='label_harvest'>Harvest<br>D-7</label>
                    <label id='alram_comment'></label>                    
                 </div>

				<!-- 그래프 -->
                <div id="div_chart">
   					<div id="chart_temperature"></div>
                    <div id="chart_humidity"></div>
                    <div id="chart_co2"></div>
                    <div id="chart_illumination"></div>
                </div>
      
            </div>


		<!-- 하단 공통 탭바 영역 -->	
        <div date-role="footer" style="width:100%; bottom:0; z-index:10; position:absolute">
            <div data-role="navbar">
                <ul>
                    <li><a href="#monitoring" data-icon="search" class="ui-btn-active" >monitoring</a></li>
                    <li><a href="#control" data-icon="star">control</a></li>
                    <li><a href="#setting" data-icon="gear">setting</a></li>
                </ul>
            </div>
        </div>
		
    </div> 
        
        
    <!-- control 탭 -->
	<div data-role="page" id="control">
	
		<!-- 연두색 공통 헤더 영역 -->
   		<div data-role="header" style="height:85px; width:100%; top:0; z-index:10;" >
			<div class="headerbox" style="padding-left:10px; padding-top:6px;">
    	        <div style="float:left"><img src="image/header_leaf.png" width="70" height="70" alt=""/> </div> 
	       		<div style="float:left; padding-left:10px; padding-top:15px;">
                    <div style="font-size:12pt; color:#ffffff;">AnyGrow Ⅱ Hybrid WebApp</div>
                    <div style="font-size:10pt; color:#ffffff;">WITLab & Biwontech</div>
                    <div style="font-size:7pt;  color:#eef4e1;">Green Eneragy Technology Research Center</div>
                </div>       
            </div>
        </div>
        
		
		
		<!-- control 탭 콘텐츠 영역 -->	
		<div data-role="content" > 
		
			<!-- 디밍 제어 영역 -->
			<div align="center">
                 <canvas id="controlCanvas" width="600" height="600" style="display:block;">aaa</canvas>
                 <label id="illum_label"></label>
            </div>

           
            <!-- 버튼 영역 -->
            <input type="button" id="btnOff" value="Light OFF" />	
            <input type="button" id="btnMood" value="Mood Light ON" />	
            <input type="button" id="btnOn" value="Light ON" />	
            <br><br><br>
    
           
		</div>
		

		<!-- 하단 공통 탭바 영역 -->	
        <div date-role="footer" style="width:100%; bottom:0; z-index:10; position:absolute">
            <div data-role="navbar">
                <ul>
                    <li><a href="#monitoring" data-icon="search" class="ui-btn-active" >monitoring</a></li>
                    <li><a href="#control" data-icon="star">control</a></li>
                    <li><a href="#setting" data-icon="gear">setting</a></li>
                </ul>
            </div>
        </div>
		
    </div> 
        
        
		
    <!-- setting 탭 -->
	<div data-role="page" id="setting" >
		<!-- 연두색 공통 헤더 영역 -->
   		<div data-role="header" style="height:85px; width:100%; top:0; z-index:10;" >
			<div class="headerbox" style="padding-left:10px; padding-top:6px;">
    	        <div style="float:left"><img src="image/header_leaf.png" width="70" height="70" alt=""/> </div> 
	       		<div style="float:left; padding-left:10px; padding-top:15px;">
                    <div style="font-size:12pt; color:#ffffff;">AnyGrow Ⅱ Hybrid WebApp</div>
                    <div style="font-size:10pt; color:#ffffff;">WITLab & Biwontech</div>
                    <div style="font-size:7pt;  color:#eef4e1;">Green Eneragy Technology Research Center</div>
                </div>       
            </div>
        </div>
        
		<!-- setting 탭 콘텐츠 영역 -->	
		<div data-role="content"> 
		
			<!-- Threshold 영역 -->	
            <div data-role="collapsible">
				<h2>Threshold</h2>
            	<ul data-role="listview">

                	<li><div data-role="rangeslider">
                        <label>Temperature</label>
                        <input id="tf_temperature_min" min="10" max="50" value="20" type="range" />
                        <input id="tf_temperature_max" min="10" max="50" value="40" type="range" />
                    </div></li>
                    
                    <li><div data-role="rangeslider">
                        <label>Humidity</label>
                        <input id="tf_humidity_min" min="0" max="100" value="20" type="range" />
                        <input id="tf_humidity_max" min="0" max="100" value="80" type="range" />
                    </div></li>
                    
                    <li><div data-role="rangeslider">
                        <label>CO<sub>2</sub></label>
                        <input id="tf_co2_min" min="0" max="6000" value="0" type="range" />
                        <input id="tf_co2_max" min="0" max="6000" value="6000" type="range" />
                    </div></li>
                    
                    <li><div data-role="rangeslider">
                        <label>Illumination</label>
                        <input id="tf_illumination_min" min="0" max="2000" value="0" type="range" />
                        <input id="tf_illumination_max" min="0" max="2000" value="2000" type="range" />
                    </div></li>
                
                    <li> <input type="submit" id="submit_threshold" value="save" onClick="chanage_threshold()"  /></li>
                    <li> <input type="submit" id="submit_threshold" value="alram init" onClick="alram_init()"  /></li>
                </ul>
            </div>
             
			<!-- Start day 영역 -->	
            <div data-role="collapsible">
          		<h2>Start day</h2>
            	<ul data-role="listview">
                	<li><input type="date" value="2014-03-15"></li>
                </ul>
            </div>
             
			<!-- Kind of crops 영역 -->	
            <div data-role="collapsible">
          		<h2>Kind of crops</h2>
            	<ul data-role="listview">
                	<li><input type="radio" id="kindCrops" checked="checked"><label for="kindCrops">상추</label></li>
                </ul>
            </div>

        </div>


		<!-- 하단 공통 탭바 영역 -->	
        <div date-role="footer" style="width:100%; bottom:0; z-index:10; position:absolute">
            <div data-role="navbar">
                <ul>
                    <li><a href="#monitoring" data-icon="search" class="ui-btn-active" >monitoring</a></li>
                    <li><a href="#control" data-icon="star">control</a></li>
                    <li><a href="#setting" data-icon="gear">setting</a></li>
                </ul>
            </div>
        </div>
		
    </div> 
        
        
        
     

	<!-- 디밍 제어 canvas를 위한 스크립트 -->
    <script>

		var canvas = document.getElementById("controlCanvas");
		var ctx = canvas.getContext("2d");
		var img = new Image();
		
		var s_width =((screen.width)*0.5);
				
		img.onload = function(){
			
			ctx.drawImage(img, 10, 0, 600, 600);
			 $('#controlCanvas').css("width",s_width+"px");
		}
		img.src="./image/controller.png";
		
		
		canvas.onmousemove= function(evt) {
			var mouseX = parseInt(evt.x);
			var mouseY = parseInt(evt.y);

			
			var centerXY = s_width;
			
			lengthS = centerXY-mouseX;	// 빗변
			lengthB = centerXY-mouseY;	// 밑면
			lengthH = Math.sqrt( Math.pow(lengthS,2) + Math.pow(lengthB,2) );	//높이
			
			angle = ((Math.atan2(lengthS,lengthB) * 180 / 3.141592)-180)*-1;
			
			//alert("X:"+mouseX+", Y:"+mouseY+", A:"+angle);
			$('#illum_label').text(parseInt(angle)+" lx");
		
	}

	</script>


</body>
</html>
